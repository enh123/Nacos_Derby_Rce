# Nacos_Derby_Rce
Nacos Derby未授权RCE   QVD-2024-26473

用法:

先开启恶意服务端(要确保受害机能够访问到):
![图片](https://github.com/user-attachments/assets/115ea844-cfaf-4ffa-afa1-b52dede1527a)


开始攻击(注意多线程可能会把nacos服务打崩):
![图片](https://github.com/user-attachments/assets/94ba0707-55a4-4932-8461-7c4e348f83d1)

成功后会创建一个恶意函数,运气好的话几十个请求就可以成功,运气不好的话发几十万个请求才成功也是有可能的

使用-udf指定之前创建的恶意函数执行命令：

![图片](https://github.com/user-attachments/assets/0456948c-97fd-4e7a-afd4-6ff806115ba2)


已成功验证的版本:2.2.3   2.3.0   2.3.1   2.3.2 

有时候创建恶意函数时成功和失败返回的内容是一样的,可以用burpsuite多线程发包然后尝试直接使用-udf指定函数执行命令


批量验证:

python3 exp.py -f url.txt


参考了以下项目:

https://github.com/HACK-THE-WORLD/nacos-poc







声明: 本工具仅限于获得充分合法授权的企业安全防护场景中使用，包括但不限于漏洞检测、授权渗透测试、内部攻防演练等。用户应确保其使用行为符合所在国家/地区的网络安全法、数据保护法、刑法及其他相关法律法规。

用户需自行承担使用本工具产生的全部法律后果，包括但不限于：

因未取得授权导致的非法侵入计算机系统、数据窃取等行为

违反隐私保护法规的信息收集与处理

对其他第三方权益（如知识产权、商业秘密）的侵害

开发者及贡献者不承担任何直接、间接、特殊或偶然性损害赔偿责任，即使其已被告知此类风险的可能性。
